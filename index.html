<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anonox Clan â€” Map + Perfil</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Firebase compat (RTDB + Firestore compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

  <!-- Estilos -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- SIDEBAR PERFIL (Firestore "perfiles" DB, app2) -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <h2 class="title">ðŸ‘¤ Perfil (Admin)</h2>
      <button id="closeSidebarBtn" class="btn close-btn">âœ•</button>
    </div>

    <div class="center">
      <img id="avatarPreview" src="https://via.placeholder.com/150" class="avatar" alt="avatar">
    </div>

    <label>Nombre</label>
    <input id="nameInput" type="text" />

    <label>Usuario</label>
    <input id="usernameInput" type="text" />

    <label>Bio</label>
    <textarea id="bioInput"></textarea>

    <label>Sitio web</label>
    <input id="websiteInput" type="url" />

    <div class="grid3">
      <input id="postsInput" type="number" placeholder="posts" />
      <input id="followersInput" type="number" placeholder="followers" />
      <input id="followingInput" type="number" placeholder="following" />
    </div>

    <label>Avatar (subir)</label>
    <input id="avatarFile" type="file" accept="image/*" />
    <div class="small">El avatar se guarda como Base64 en Firestore.</div>

    <!-- Solo lectura: Gmail / Password -->
    <div class="readonly">
      <p class="muted">ðŸ“§ Gmail (solo lectura)</p>
      <p id="gmailDisplay" class="readonlyField">â€”</p>

      <p class="muted">ðŸ”‘ Password (solo lectura)</p>
      <p id="passwordDisplay" class="readonlyField">â€”</p>
    </div>

    <button id="saveProfileBtn" class="btn">ðŸ’¾ Guardar perfil</button>

    <div class="note">Nota: gmail / password no las proporcionamos â€” solo se muestran si existen en la DB.</div>
  </aside>

  <!-- MAIN: Mapa + Chat -->
  <div class="main">
    <div class="topbar">
      <button id="toggleSidebarBtn" class="btn">â˜° Perfil</button>
      <input id="nick" type="text" placeholder="Tu Nick" class="nick-input" />
      <button id="startBtn" class="btn">Iniciar Seguimiento</button>
    </div>

    <div id="map" class="map"></div>

    <div id="usersPanel" class="chatlog">
      <div class="panelTitle">Usuarios conectados</div>
      <div id="usersList"></div>
    </div>

    <div class="chatbar">
      <input id="topicInput" class="input" placeholder="Topic (nick o regiÃ³n)" />
      <input id="messageInput" class="input" placeholder="Mensaje..." />
      <button id="sendBtn" class="btn">Enviar</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="app.js"></script>
</body>
</html>
